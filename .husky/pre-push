#!/bin/sh

# Regenerate Agent Skills from YAML definitions before push
echo "üîÑ Regenerating Agent Skills..."

python skills/generate.py --clean

# Check if there are any changes to commit
if ! git diff --quiet .claude/skills/ .codex/skills/ 2>/dev/null; then
    echo "‚ö†Ô∏è  Skills were regenerated with changes. Please review and commit:"
    git status .claude/skills/ .codex/skills/
    echo ""
    echo "Run: git add .claude/skills .codex/skills && git commit --amend --no-edit"
    exit 1
fi

echo "‚úÖ Agent Skills are up to date"
