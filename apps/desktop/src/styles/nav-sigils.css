/**
 * Cyntra Navigation Sigil Styles
 *
 * Implements the runic navigation system with:
 * - Diamond containment frames
 * - State-based coloring (idle/hover/active)
 * - System status overlays
 * - Smooth animations with reduced-motion support
 */

/* ==========================================================================
   Nav Tile Base
   ========================================================================== */

.nav-tile {
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  width: 44px;
  height: 44px;
  padding: 0;
  border: none;
  background: transparent;
  cursor: pointer;
  transition:
    transform var(--transition-fast),
    background var(--transition-fast);

  /* Focus ring */
  outline: none;
  border-radius: var(--radius-md);
}

.nav-tile:focus-visible {
  box-shadow: 0 0 0 2px var(--accent-primary);
}

/* Sigil and diamond positioning */
.nav-tile-diamond,
.nav-tile-sigil {
  position: absolute;
  top: 50%;
  left: 50%;
  transform: translate(-50%, -50%);
  pointer-events: none;
}

/* ==========================================================================
   Diamond Frame Styles
   ========================================================================== */

.diamond-frame {
  transition:
    opacity var(--transition-fast),
    filter var(--transition-normal);
}

.diamond-frame-rect {
  fill: none;
  stroke: var(--slate);
  stroke-width: 1px;
  opacity: 0;
  transition:
    opacity var(--transition-fast),
    stroke var(--transition-fast);
}

/* Hover state - faint outline */
.diamond-frame--hovered .diamond-frame-rect {
  opacity: 0.4;
}

/* Active state - full visibility with gold and glow */
.diamond-frame--active .diamond-frame-rect {
  opacity: 1;
  stroke: var(--accent-primary);
  filter: drop-shadow(0 0 6px var(--accent-glow));
}

/* ==========================================================================
   Sigil Colors
   ========================================================================== */

.nav-tile-sigil {
  color: var(--text-tertiary);
  transition: color var(--transition-fast);
}

/* Hover state */
.nav-tile--hovered .nav-tile-sigil {
  color: var(--text-secondary);
}

/* Active state */
.nav-tile--active .nav-tile-sigil {
  color: var(--accent-primary);
}

/* Disabled state */
.nav-tile--disabled .nav-tile-sigil {
  color: var(--slate);
  opacity: 0.5;
}

.nav-tile--disabled {
  cursor: not-allowed;
  pointer-events: none;
}

/* ==========================================================================
   Nav Tile States
   ========================================================================== */

/* Hover transform */
.nav-tile:hover:not(.nav-tile--disabled) {
  transform: scale(1.05);
}

/* Active state - left accent rail */
.nav-tile--active {
  border-left: 3px solid var(--accent-primary);
  border-radius: 0 var(--radius-md) var(--radius-md) 0;
  margin-left: -3px;
  padding-left: 3px;
}

/* ==========================================================================
   Status Overlays
   ========================================================================== */

/* Running status - orbiting dot */
.status-orbit-dot {
  position: absolute;
  width: 100%;
  height: 100%;
  top: 0;
  left: 0;
  pointer-events: none;
  animation: orbit-dot 3s linear infinite;
}

.status-orbit-dot-inner {
  position: absolute;
  top: 2px;
  left: 50%;
  width: 5px;
  height: 5px;
  margin-left: -2.5px;
  background: var(--signal-active);
  border-radius: 50%;
  box-shadow: 0 0 6px var(--signal-active);
}

/* Error status - fracture mark */
.status-fracture {
  position: absolute;
  top: 4px;
  right: 4px;
  color: var(--signal-error);
  filter: drop-shadow(0 0 4px var(--signal-error));
  pointer-events: none;
}

/* Attention status - pulse ring */
.status-pulse-ring {
  position: absolute;
  top: 50%;
  left: 50%;
  width: 36px;
  height: 36px;
  margin-top: -18px;
  margin-left: -18px;
  border: 2px solid var(--signal-warning);
  border-radius: 50%;
  pointer-events: none;
  animation: pulse-ring 2s ease-out infinite;
}

/* ==========================================================================
   Animations
   ========================================================================== */

/* Diamond breathe - active state animation */
@keyframes diamond-breathe {
  0%,
  100% {
    transform: translate(-50%, -50%) scale(1);
    filter: drop-shadow(0 0 6px var(--accent-glow));
  }
  50% {
    transform: translate(-50%, -50%) scale(1.02);
    filter: drop-shadow(0 0 10px var(--accent-glow));
  }
}

.nav-tile--active .nav-tile-diamond {
  animation: diamond-breathe 4s ease-in-out infinite;
}

/* Orbit dot - running status animation */
@keyframes orbit-dot {
  0% {
    transform: rotate(0deg);
  }
  100% {
    transform: rotate(360deg);
  }
}

/* Pulse ring - attention status animation */
@keyframes pulse-ring {
  0% {
    transform: scale(0.8);
    opacity: 1;
  }
  100% {
    transform: scale(1.4);
    opacity: 0;
  }
}

/* Cursor blink for Prompt sigil */
@keyframes cursor-blink {
  0%,
  50% {
    opacity: 1;
  }
  51%,
  100% {
    opacity: 0;
  }
}

.cursor-blink {
  animation: cursor-blink 1s step-end infinite;
}

/* ==========================================================================
   Reduced Motion
   ========================================================================== */

@media (prefers-reduced-motion: reduce) {
  .nav-tile--active .nav-tile-diamond,
  .status-orbit-dot,
  .status-pulse-ring,
  .cursor-blink {
    animation: none;
  }

  /* Static glow for active state */
  .nav-tile--active .diamond-frame-rect {
    filter: drop-shadow(0 0 8px var(--accent-glow));
  }

  /* Static position for running dot */
  .status-orbit-dot-inner {
    top: 2px;
    left: calc(50% - 2.5px);
    opacity: 1;
  }

  /* Static ring for attention */
  .status-pulse-ring {
    opacity: 0.6;
    transform: scale(1.1);
  }
}

/* ==========================================================================
   Expanded Labels Mode (Optional)
   ========================================================================== */

.nav-rail--expanded .nav-tile {
  width: 100%;
  justify-content: flex-start;
  padding-left: 12px;
  gap: 12px;
}

.nav-rail--expanded .nav-tile-label {
  display: block;
  font-size: var(--text-sm);
  font-weight: var(--font-medium);
  color: var(--text-secondary);
  white-space: nowrap;
}

.nav-tile-label {
  display: none;
}

.nav-tile--active .nav-tile-label {
  color: var(--accent-primary);
}
